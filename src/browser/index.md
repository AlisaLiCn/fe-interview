### 进程和线程
- 一个进程就是一个程序的运行实例。详细解释就是，启动一个程序的时候，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程。
- 多线程可以并行处理任务，但是线程是不能单独存在的，它是由进程来启动和管理的。

进程和线程关系：
1. 进程中的任意一线程执行出错，都会导致整个进程的崩溃。
2. 线程之间共享进程中的数据。
3. 当一个进程关闭之后，操作系统会回收进程所占用的内存。
4. 进程之间的内容相互隔离。

### 浏览器的多进程架构
Chrome浏览器包括：1个浏览器（Browser）主进程、1个 GPU 进程、1个网络（NetWork）进程、多个渲染进程和多个插件进程

- 浏览器进程。主要负责界面显示、用户交互、子进程管理，同时提供存储等功能。
- 渲染进程。核心任务是将HTML、CSS和JavaScript转换为用户可以与之交互的网页，排版引擎Blink和JavaScript引擎V8都是运行在该进程中，默认情况下，Chrome会为每个Tab标签创建一个渲染进程。出于安全考虑，渲染进程都是运行在沙箱模式下。
- GPU进程。其实，Chrome刚开始发布的时候是没有GPU进程的。而GPU的使用初衷是为了实现3D CSS的效果，只是随后网页、Chrome的UI界面都选择采用GPU来绘制，这使得GPU成为浏览器普遍的需求。最后，Chrome在其多进程架构上也引入了GPU进程。
- 网络进程。主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立出来，成为一个单独的进程。
- 插件进程。主要是负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响

### 浏览器的渲染流程
按照渲染的时间顺序，渲染流程可分为如下几个子阶段：
- 构建DOM树
- 样式计算
- 布局阶段
- 分层
- 绘制
- 分块
- 光栅化和合成

构建DOM树：DOM是保存在内存中的树状结构，浏览器控制台输入`document`可以查看，可以通过JavaScript来查询或修改其内容。
- 输入内容：HTML文件
- 处理过程：经由HTML解析器解析
- 输出内容：树状结构的DOM

样式计算：计算出DOM节点中每个元素的具体样式，分为三步。
- 把CSS转换为浏览器能够理解的结构——styleSheets（浏览器控制台输入`document.styleSheets`可以查看）
- 转换样式表中的属性值，使其标准化。CSS文本中有很多属性值，如2em、blue、bold，这些类型数值不容易被渲染引擎理解，所以需要将所有值转换为渲染引擎容易理解的、标准化的计算值，这个过程就是属性值标准化。例如标准化后2em被解析成了32px，red被解析成了rgb(255,0,0)，bold被解析成了700等值。
- 计算出DOM树中每个节点的具体样式。
  - 样式继承：样式计算过程中，会根据DOM节点的继承关系来合理计算节点样式。
  - 样式层叠：层叠是CSS的一个基本特征，它是一个定义了如何合并来自多个源的属性值的算法。
样式计算阶段最终输出的内容是每个DOM节点的样式，并被保存在ComputedStyle的结构内。

布局阶段：计算出DOM树中可见元素的几何位置，我们把这个计算过程叫做布局。
- 创建布局树：DOM树还含有很多不可见的元素，比如head标签，还有使用了display:none属性的元素。所以在显示之前，我们还要额外地构建一棵只包含可见元素布局树。
  - 遍历DOM树中的所有可见节点，并把这些节点加到布局中；
  - 而不可见的节点会被布局树忽略掉，如head标签下面的全部内容，再比如body.p.span这个元素，因为它的属性包含 dispaly:none，所以这个元素也没有被包进布局树
- 布局计算

### 缓存位置